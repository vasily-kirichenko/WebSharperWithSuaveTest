(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu;$.Define($$,{WebSharper:{UI:{Next:{Abbrev:{Async:{Schedule:function(bv){return a.Start(a.Delay(function(){return a.Return(bv(null));}),{$:0});},StartTo:function(bw,bx){return a.StartWithContinuations(bw,bx,function(){},function(){},{$:0});}},Dict:{ToKeyArray:function(bA){var bB;bB=b(bA.count);c.iteri(function(bC){return function(bD){return d.set(bB,bC,bD.K);};},bA);return bB;},ToValueArray:function(bE){var bF;bF=b(bE.count);c.iteri(function(bG){return function(bH){return d.set(bF,bG,bH.V);};},bE);return bF;}},Fresh:{Id:function(){var bI;bI=h.counter()+1;h.counter=function(){return bI;};return"uid"+$$.String(h.counter());},Int:function(){var bJ;bJ=h.counter()+1;h.counter=function(){return bJ;};return h.counter();},counter:$.Field(function(){return 0;})},HashSet:{Except:function(bK,bL){var bM;bM=j.New(k.ToArray(bL));bM.ExceptWith(k.ToArray(bK));return bM;},Filter:function(bN,bO){return j.New(d.filter(bN,k.ToArray(bO)));},Intersect:function(bP,bQ){var bR;bR=j.New(k.ToArray(bP));bR.IntersectWith(k.ToArray(bQ));return bR;},ToArray:function(bS){var bT;bT=b(bS.get_Count());bS.CopyTo(bT);return bT;}},JQueue:{Add:function($x,$q){var $0=this,$this=this;return $q.push($x);},Count:function(bU){return bU.length;},Dequeue:function($q){var $0=this,$this=this;return $q.shift();},Iter:function(bV,bW){return d.iter(bV,l.ToArray(bW));},ToArray:function(bX){return bX.slice();}},Mailbox:{StartProcessor:function(bY){var bZ,b0,b1;bZ=[];b0=[false];b1=a.Delay(function(){return a.Combine(a.While(function(){return l.Count(bZ)>0;},a.Delay(function(){return a.Bind(bY(l.Dequeue(bZ)),function(){return a.Return(null);});})),a.Delay(function(){return a.Return(void(b0[0]=false));}));});return function(b7){l.Add(b7,bZ);if(!b0[0]){b0[0]=true;return a.Start(b1,{$:0});}else{return null;}};}},Slot1:$.Class({Equals:function(b8){return m.Equals(this.key.call(null,this.value),this.key.call(null,b8.get_Value()));},GetHashCode:function(){return m.Hash(this.key.call(null,this.value));},get_Value:function(){return this.value;}},{Create:function(b9,b_){return n.New(b9,b_);},New:function(b$,ca){var cb;cb=$.New(this,{});cb.key=b$;cb.value=ca;return cb;}}),U:function(){return;}},An:$.Class({},{Append:function(cc,cd){return $.New(o,{$:0,$0:p.Append(cc.$0,cd.$0)});},Concat:function(ce){return $.New(o,{$:0,$0:p.Concat(c.map(function(cf){return q.List(cf);},ce))});},Const:function(cg){return q.Const(cg);},Delayed:function(ch,ci,cj,ck,cl,cm){return{Compute:function(cn){return cn<=ck?cl:ch.Interpolate(ci.TransformTime.call(null,(cn-ck)/cj),cl,cm);},Duration:cj+ck};},Map:function(co,cp){var cq;cq=cp.Compute;return q.Def(cp.Duration,function(cr){return co(cq(cr));});},Pack:function(cs){return $.New(o,{$:0,$0:p.Single({$:1,$0:cs})});},Play:function(ct){return a.Delay(function(){return a.Bind(o.Run(function(){},q.Actions(ct)),function(){return a.Return(q.Finalize(ct));});});},Run:function(cx,cy){var cz;cz=cy.Duration;return a.FromContinuations(function(cA){var cB,cC;cB=cA[0];cC=function(cD,cE){var cF;cF=cE-cD;cx(cy.Compute.call(null,cF));return cF<=cz?void r(function(cG){return cC(cD,cG);}):cB(null);};r(function(cH){return cC(cH,cH);});return;});},Simple:function(cI,cJ,cK,cL,cM){return{Compute:function(cN){return cI.Interpolate(cJ.TransformTime.call(null,cN/cK),cL,cM);},Duration:cK};},WhenDone:function(cO,cP){return o.Append($.New(o,{$:0,$0:p.Single({$:0,$0:cO})}),cP);},get_Empty:function(){return $.New(o,{$:0,$0:p.Empty()});}}),AnimatedAttrNode:$.Class({GetChangeAnim:function(cQ){var cR,cT=this;cR=[this.visible,this.logical];return o.WhenDone(function(){return cT.sync(cQ);},cR[0].$==1?cR[1].$==1?cT.dirty?o.Pack(o.Map(function(cU){return cT.pushVisible(cQ,cU);},s.AnimateChange(cT.tr,cR[0].$0,cR[1].$0))):o.get_Empty():o.get_Empty():o.get_Empty());},GetEnterAnim:function(cV){var cW,cY=this;cW=[this.visible,this.logical];return o.WhenDone(function(){return cY.sync(cV);},cW[0].$==1?cW[1].$==1?cY.dirty?o.Pack(o.Map(function(cZ){return cY.pushVisible(cV,cZ);},s.AnimateChange(cY.tr,cW[0].$0,cW[1].$0))):cW[0].$==0?cW[1].$==1?o.Pack(o.Map(function(c0){return cY.pushVisible(cV,c0);},s.AnimateEnter(cY.tr,cW[1].$0))):o.get_Empty():o.get_Empty():cW[0].$==0?cW[1].$==1?o.Pack(o.Map(function(c1){return cY.pushVisible(cV,c1);},s.AnimateEnter(cY.tr,cW[1].$0))):o.get_Empty():o.get_Empty():cW[0].$==0?cW[1].$==1?o.Pack(o.Map(function(c2){return cY.pushVisible(cV,c2);},s.AnimateEnter(cY.tr,cW[1].$0))):o.get_Empty():o.get_Empty());},GetExitAnim:function(c3){var c4,c6=this;c4=this.visible;return o.WhenDone(function(){c6.dirty=true;c6.visible={$:0};return;},c4.$==1?o.Pack(o.Map(function(c7){return c6.pushVisible(c3,c7);},s.AnimateExit(c6.tr,c4.$0))):o.get_Empty());},Init:function(){return null;},Sync:function(){return null;},get_Changed:function(){return this.updates;},pushVisible:function(c_,c$){this.visible={$:1,$0:c$};this.dirty=true;return(this.push.call(null,c_))(c$);},sync:function(da){if(this.dirty){t.iter(this.push.call(null,da),this.logical);this.visible=this.logical;this.dirty=false;return;}else{return null;}}},{New:function(db,dc,dd){var de;de=$.New(this,{});de.tr=db;de.push=dd;de.logical={$:0};de.visible={$:0};de.dirty=true;de.updates=u.Map(function(df){de.logical={$:1,$0:df};de.dirty=true;return;},dc);return de;}}),Anims:{Actions:function(dg){return q.ConcatActions(d.choose(function(dh){return dh.$==1?{$:1,$0:dh.$0}:{$:0};},p.ToArray(dg.$0)));},ConcatActions:function(di){var dj,dk,dl,dn;dj=c.toArray(di);dk=d.length(dj);if(dk===0){return q.Const(null);}else{if(dk===1){return d.get(dj,0);}else{dl=c.max(c.map(function(dm){return dm.Duration;},dj));dn=d.map(function(_do){return q.Prolong(dl,_do);},dj);return q.Def(dl,function(dp){return d.iter(function(dq){return dq.Compute.call(null,dp);},dn);});}}},Const:function(dr){return q.Def(0,function(){return dr;});},Def:function(dt,du){return{Compute:du,Duration:dt};},Finalize:function(dv){return d.iter(function(dw){return dw.$==0?dw.$0.call(null,null):null;},p.ToArray(dv.$0));},List:function(dx){return dx.$0;},Prolong:function(dy,dz){var dA,dB,dC;dA=dz.Compute;dB=dz.Duration;dC=v.Create(function(){return dz.Compute.call(null,dz.Duration);});return{Compute:function(dE){return dE>=dB?dC.eval():dA(dE);},Duration:dy};}},AppendList1:{Append:function(dF,dG){var dH;dH=[dF,dG];return dH[0].$==0?dH[1]:dH[1].$==0?dH[0]:{$:2,$0:dF,$1:dG};},Concat:function(dI){var dJ;dJ=c.toArray(dI);return w.MapReduce(function(dK){return dK;},p.Empty(),function(dL){return function(dM){return p.Append(dL,dM);};},dJ);},Empty:function(){return{$:0};},FromArray:function(dN){var dO;dO=dN.length;return dO===0?{$:0}:dO===1?{$:1,$0:d.get(dN,0)}:{$:3,$0:dN.slice()};},Single:function(dP){return{$:1,$0:dP};},ToArray:function(dQ){var dR,dS;dR=[];dS=function(dT){var dU;if(dT.$==1){return l.Add(dT.$0,dR);}else{if(dT.$==2){dU=dT.$1;dS(dT.$0);return dS(dU);}else{return dT.$==3?d.iter(function(dV){return l.Add(dV,dR);},dT.$0):null;}}};dS(dQ);return l.ToArray(dR);}},Array:{MapReduce:function(dW,dX,dY,dZ){var d0;d0=function(d1,d2){var d3,d4,d5,d6,d7,d8;if(d2<=0){return dX;}else{if(d2===1){if(d1>=0?d1<d.length(dZ):false){return dW(d.get(dZ,d1));}else{d3=d2/2>>0;d4=d0(d1,d3);d5=d0(d1+d3,d2-d3);return(dY(d4))(d5);}}else{d6=d2/2>>0;d7=d0(d1,d6);d8=d0(d1+d6,d2-d6);return(dY(d7))(d8);}}};return d0(0,d.length(dZ));}},AttrModule:{Animated:function(d9,d_,d$,ea){return x.Animated(d_,d$,function(eb){return function(ec){return y.SetAttr(eb,d9,ea(ec));};});},AnimatedStyle:function(ed,ee,ef,eg){return x.Animated(ee,ef,function(eh){return function(ei){return y.SetStyle(eh,ed,eg(ei));};});},Class:function(ej){return x.Static(function(ek){return y.AddClass(ek,ej);});},ContentEditableHtml:function(el){var em;em=z.CustomVar(el,function(en){return function(eo){en.innerHTML=eo;};},function(ep){return{$:1,$0:ep.innerHTML};});return A.Append(A.Create("contenteditable","true"),em);},ContentEditableText:function(eq){var er;er=z.CustomVar(eq,function(es){return function(et){es.textContent=et;};},function(eu){return{$:1,$0:eu.textContent};});return A.Append(A.Create("contenteditable","true"),er);},CustomValue:function(ev,ew,ex){return z.CustomVar(ev,function(ey){return function(ez){ey.value=ew(ez);};},function(eA){return ex(eA.value);});},CustomVar:function(eB,eC,eD){var eE,eJ;eE=function(eF){return function(){return eB.UpdateMaybe(function(eH){var eI;eI=eD(eF);return eI.$==1?!m.Equals(eI.$0,eH)?eI:{$:0}:{$:0};});};};eJ=function(eK){return function(eL){var eM;eM=eD(eK);return eM.$==1?m.Equals(eM.$0,eL)?null:(eC(eK))(eL):(eC(eK))(eL);};};return A.Concat(B.ofArray([z.Handler("change",eE),z.Handler("input",eE),z.Handler("keypress",eE),z.DynamicCustom(eJ,eB.get_View())]));},Dynamic:function(eN,eO){return x.Dynamic(eO,function(){},function(eQ){return function(eR){return y.SetAttr(eQ,eN,eR);};});},DynamicClass:function(eS,eT,eU){return x.Dynamic(eT,function(){},function(eW){return function(eX){return eU(eX)?y.AddClass(eW,eS):y.RemoveClass(eW,eS);};});},DynamicCustom:function(eY,eZ){return x.Dynamic(eZ,function(){},eY);},DynamicPred:function(e1,e2,e3){var e4;e4=function(e5){return function(e6){var e7;e7=e6[1];return e6[0]?y.SetAttr(e5,e1,e7):y.RemoveAttr(e5,e1);};};return x.Dynamic(u.Map2(function(e8){return function(e9){return[e8,e9];};},e2,e3),function(){},e4);},DynamicProp:function(e$,fa){return x.Dynamic(fa,function(){},function(fc){return function(fd){fc[e$]=fd;};});},DynamicStyle:function(fe,ff){return x.Dynamic(ff,function(){},function(fh){return function(fi){return y.SetStyle(fh,fe,fi);};});},Handler:function(fj,fk){return x.Static(function(fl){return fl.addEventListener(fj,fk(fl),false);});},HandlerView:function(fm,fn,fo){var fp;fp=h.Id();return x.Dynamic(fn,function(fq){var fr;fr=fo(fq);return fq.addEventListener(fm,function(fs){return(fr(fs))(fq[fp]);},false);},function(ft){return function(fu){ft[fp]=fu;};});},OnAfterRender:function(fv){return x.Mk(0,{$:4,$0:fv});},Style:function(fw,fx){return x.Static(function(fy){return y.SetStyle(fy,fw,fx);});},ValidateForm:$.Field(function(){return z.OnAfterRender(function(fz){return $$.H5F?$$.H5F.setup(fz):undefined;});}),Value:function(fA){return z.CustomValue(fA,function(fB){return fB;},function(fC){return{$:1,$0:fC};});}},AttrProxy:$.Class({},{Append:function(fD,fE){return x.Mk(fD.Flags|fE.Flags,x.AppendTree(fD.Tree,fE.Tree));},Concat:function(fF){var fG;fG=c.toArray(fF);return w.MapReduce(function(fH){return fH;},A.get_Empty(),function(fI){return function(fJ){return A.Append(fI,fJ);};},fG);},Create:function(fK,fL){return x.Static(function(fM){return y.SetAttr(fM,fK,fL);});},Handler:function(fN,fO){return x.Static(function(fP){return fP.addEventListener(fN,fO(fP),false);});},get_Empty:function(){return x.EmptyAttr();}}),Attrs:{Animated:function(fQ,fR,fS){var fT,fU;fT=C.New(fQ,fR,fS);fU=4;if(s.CanAnimateEnter(fQ)){fU=fU|1;}if(s.CanAnimateExit(fQ)){fU=fU|2;}return x.Mk(fU,{$:1,$0:fT});},AppendTree:function(fV,fW){var fX;fX=[fV,fW];return fX[0].$==0?fX[1]:fX[1].$==0?fX[0]:{$:2,$0:fV,$1:fW};},Dynamic:function(fY,fZ,f0){return x.Mk(0,{$:1,$0:D.New(fY,fZ,f0)});},EmptyAttr:$.Field(function(){return x.Mk(0,{$:0});}),GetAnim:function(f1,f2){return o.Concat(d.map(function(f3){return(f2(f3))(f1.DynElem);},f1.DynNodes));},GetChangeAnim:function(f4){return x.GetAnim(f4,function(f5){return function(f6){return f5.GetChangeAnim(f6);};});},GetEnterAnim:function(f7){return x.GetAnim(f7,function(f8){return function(f9){return f8.GetEnterAnim(f9);};});},GetExitAnim:function(f_){return x.GetAnim(f_,function(f$){return function(ga){return f$.GetExitAnim(ga);};});},HasChangeAnim:function(gb){return(gb.DynFlags&4)!==0;},HasEnterAnim:function(gc){return(gc.DynFlags&1)!==0;},HasExitAnim:function(gd){return(gd.DynFlags&2)!==0;},Insert:function(ge,gf){var gg,gh,gi;gg=[];gh=[];gi=function(gj){var gk,gl;if(gj.$==1){gk=gj.$0;gk.Init(ge);return l.Add(gk,gg);}else{if(gj.$==2){gl=gj.$1;gi(gj.$0);return gi(gl);}else{return gj.$==3?gj.$0.call(null,ge):gj.$==4?l.Add(gj.$0,gh):null;}}};gi(gf.Tree);return $.DeleteEmptyFields({DynElem:ge,DynFlags:gf.Flags,DynNodes:l.ToArray(gg),OnAfterRender:(l.Count(gh)===0?{$:0}:{$:1,$0:function(gm){return l.Iter(function(gn){return gn(gm);},gh);}}).$0},["OnAfterRender"]);},Mk:function(go,gp){return $.New(A,{Flags:go,Tree:gp});},Static:function(gq){return x.Mk(0,{$:3,$0:gq});},Sync:function(gr,gs){return d.iter(function(gt){return gt.Sync(gr);},gs.DynNodes);},Updates:function(gu){var gv,gA;gv=function(gw){return function(gx){return u.Map2(function(){return function(){return null;};},gw,gx);};};gA=gu.DynNodes;return w.MapReduce(function(gB){return gB.get_Changed();},E.Const(null),gv,gA);}},CheckedInput:$.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}}),Doc:$.Class({ReplaceInDom:function(gC){var gD;gD=F.createTextNode("");gC.parentNode.replaceChild(gD,gC);return G.RunBefore(gD,this);},get_DocNode:function(){return this.docNode;},get_Updates:function(){return this.updates;}},{Append:function(gE,gF){var gG;gG=u.Map2(function(){return function(){return null;};},gE.get_Updates(),gF.get_Updates());return G.Mk({$:0,$0:gE.get_DocNode(),$1:gF.get_DocNode()},gG);},Async:function(gJ){return G.EmbedView(u.MapAsync(function(gK){return gK;},E.Const(gJ)));},BindView:function(gL,gM){return G.EmbedView(u.Map(gL,gM));},Button:function(gN,gO,gP){var gQ;gQ=A.Concat(gO);return H.New(G.Clickable("button",gP),gQ,G.TextNode(gN));},ButtonView:function(gR,gS,gT,gU){var gV;gV=A.Concat(c.append([z.HandlerView("click",gT,function(){return function(){return gU;};})],gS));return H.New(y.CreateElement("button"),gV,G.TextNode(gR));},CheckBox:function(gY,gZ){var g0;g0=y.CreateElement("input");g0.addEventListener("click",function(){return gZ.Set(g0.checked);},false);return H.New(g0,A.Concat(c.toList(c.delay(function(){return c.append(gY,c.delay(function(){return c.append([A.Create("type","checkbox")],c.delay(function(){return[z.DynamicProp("checked",gZ.get_View())];}));}));}))),G.get_Empty());},CheckBoxGroup:function(g5,g6,g7){var g8,g9,g$,hb,hc;g8=g7.get_View();g9=function(g_){return m.Equals(g_,g6);};g$=u.Map(function(ha){return c.exists(g9,ha);},g8);hb=A.Concat(B.append(B.ofArray([A.Create("type","checkbox"),A.Create("name",g7.get_Id()),A.Create("value",h.Id()),z.DynamicProp("checked",g$)]),B.ofSeq(g5)));hc=y.CreateElement("input");hc.addEventListener("click",function(){var he;he=hc.checked;return g7.Update(function(hf){return c.toList(I.distinct(he?B.append(hf,B.ofArray([g6])):B.filter(function(hg){return!m.Equals(hg,g6);},hf)));});},false);return H.New(hc,hb,G.get_Empty());},Clickable:function(hh,hi){var hj;hj=y.CreateElement(hh);hj.addEventListener("click",function(hk){hk.preventDefault();return hi(null);},false);return hj;},Concat:function(hl){var hm;hm=c.toArray(hl);return w.MapReduce(function(hn){return hn;},G.get_Empty(),function(ho){return function(hp){return G.Append(ho,hp);};},hm);},Convert:function(hq,hr){return G.Flatten(u.MapSeqCached(hq,hr));},ConvertBy:function(hs,ht,hu){return G.Flatten(u.MapSeqCachedBy(hs,ht,hu));},ConvertSeq:function(hv,hw){return G.Flatten(u.MapSeqCachedView(hv,hw));},ConvertSeqBy:function(hx,hy,hz){return G.Flatten(u.MapSeqCachedViewBy(hx,hy,hz));},Element:function(hA,hB,hC){var hD,hE;hD=A.Concat(hB);hE=G.Concat(hC);return H.New(y.CreateElement(hA),hD,hE);},EmbedView:function(hF){var hG,hH;hG=J.CreateEmbedNode();hH=u.Map(function(){},E.Bind(function(hJ){J.UpdateEmbedNode(hG,hJ.get_DocNode());return hJ.get_Updates();},hF));return G.Mk({$:2,$0:hG},hH);},Flatten:function(hK){return G.EmbedView(u.Map(function(hL){return G.Concat(hL);},hK));},FloatInput:function(hM,hN){return G.InputInternal("input",function(hO){return c.append(hM,[z.CustomValue(hN,function(hP){return hP.get_Input();},function(hQ){var hR,hS;if(K.isBlank(hQ)){hR=(hO.checkValidity?hO.checkValidity():true)?$.New(L,{$:2,$0:hQ}):$.New(L,{$:1,$0:hQ});}else{hS=+hQ;hR=$$.isNaN(hS)?$.New(L,{$:1,$0:hQ}):$.New(L,{$:0,$0:hS,$1:hQ});}return{$:1,$0:hR};}),A.Create("type","number")]);});},FloatInputUnchecked:function(hT,hU){var hV;hV=function(hW){var hX;if(K.isBlank(hW)){return{$:1,$0:0};}else{hX=+hW;return $$.isNaN(hX)?{$:0}:{$:1,$0:hX};}};return G.InputInternal("input",function(){return c.append(hT,[hU.Get()===0?A.Create("value","0"):A.get_Empty(),z.CustomValue(hU,function(hZ){return $$.String(hZ);},hV),A.Create("type","number")]);});},Input:function(h0,h1){return G.InputInternal("input",function(){return c.append(h0,[z.Value(h1)]);});},InputArea:function(h3,h4){return G.InputInternal("textarea",function(){return c.append(h3,[z.Value(h4)]);});},InputInternal:function(h6,h7){var h8;h8=y.CreateElement(h6);return H.New(h8,A.Concat(h7(h8)),G.get_Empty());},IntInput:function(h9,h_){return G.InputInternal("input",function(h$){return c.append(h9,[z.CustomValue(h_,function(ia){return ia.get_Input();},function(ib){var ic,id;if(K.isBlank(ib)){ic=(h$.checkValidity?h$.checkValidity():true)?$.New(L,{$:2,$0:ib}):$.New(L,{$:1,$0:ib});}else{id=+ib;ic=$$.isNaN(id)?$.New(L,{$:1,$0:ib}):$.New(L,{$:0,$0:id,$1:ib});}return{$:1,$0:ic};}),A.Create("type","number"),A.Create("step","1")]);});},IntInputUnchecked:function(ie,_if){var ig;ig=function(ih){var ii;if(K.isBlank(ih)){return{$:1,$0:0};}else{ii=+ih;return ii!==ii>>0?{$:0}:{$:1,$0:ii};}};return G.InputInternal("input",function(){return c.append(ie,[_if.Get()===0?A.Create("value","0"):A.get_Empty(),z.CustomValue(_if,function(ik){return $$.String(ik);},ig),A.Create("type","number"),A.Create("step","1")]);});},Link:function(il,im,_in){var io,ip;io=A.Concat(im);ip=A.Append(A.Create("href","#"),io);return H.New(G.Clickable("a",_in),ip,G.TextNode(il));},LinkView:function(iq,ir,is,it){var iu;iu=A.Concat(c.append([z.HandlerView("click",is,function(){return function(){return it;};}),A.Create("href","#")],ir));return H.New(y.CreateElement("a"),iu,G.TextNode(iq));},Mk:function(ix,iy){return G.New(ix,iy);},New:function(iz,iA){var iB;iB=$.New(this,{});iB.docNode=iz;iB.updates=iA;return iB;},PasswordBox:function(iC,iD){return G.InputInternal("input",function(){return c.append(iC,[z.Value(iD),A.Create("type","password")]);});},Radio:function(iF,iG,iH){var iI,iK,iM;iI=y.CreateElement("input");iI.addEventListener("click",function(){return iH.Set(iG);},false);iK=z.DynamicProp("checked",u.Map(function(iL){return m.Equals(iL,iG);},iH.get_View()));iM=function(iN,iO){return A.Create(iN,iO);};return H.New(iI,A.Concat(B.append(B.ofArray([iM("type","radio"),iM("name",iH.get_Id()),iK]),B.ofSeq(iF))),G.get_Empty());},Run:function(iP,iQ){var iR,iS;iR=iQ.get_DocNode();J.LinkElement(iP,iR);iS=J.CreateRunState(iP,iR);return E.Sink(M.StartProcessor(function(){return J.PerformAnimatedUpdate(iS,iR);}),iQ.get_Updates());},RunAfter:function(iU,iV){var iW;iW=F.createTextNode("");iU.parentNode.insertBefore(iW,iU.nextSibling);return G.RunBetween(iU,iW,iV);},RunAfterById:function(iX,iY){var iZ;iZ=y.Doc().getElementById(iX);return m.Equals(iZ,null)?N.FailWith("invalid id: "+iX):G.RunAfter(iZ,iY);},RunAppend:function(i0,i1){var i2;i2=F.createTextNode("");i0.appendChild(i2);return G.RunBefore(i2,i1);},RunAppendById:function(i3,i4){var i5;i5=y.Doc().getElementById(i3);return m.Equals(i5,null)?N.FailWith("invalid id: "+i3):G.RunAppend(i5,i4);},RunBefore:function(i6,i7){var i8;i8=F.createTextNode("");i6.parentNode.insertBefore(i8,i6);return G.RunBetween(i8,i6,i7);},RunBeforeById:function(i9,i_){var i$;i$=y.Doc().getElementById(i9);return m.Equals(i$,null)?N.FailWith("invalid id: "+i9):G.RunBefore(i$,i_);},RunBetween:function(ja,jb,jc){var jd;J.LinkPrevElement(jb,jc.get_DocNode());jd=J.CreateDelimitedRunState(ja,jb,jc.get_DocNode());return E.Sink(M.StartProcessor(function(){return J.PerformAnimatedUpdate(jd,jc.get_DocNode());}),jc.get_Updates());},RunById:function(jf,jg){var jh;jh=y.Doc().getElementById(jf);return m.Equals(jh,null)?N.FailWith("invalid id: "+jf):G.Run(jh,jg);},RunPrepend:function(ji,jj){var jk;jk=F.createTextNode("");ji.insertBefore(jk,ji.firstChild);return G.RunBefore(jk,jj);},RunPrependById:function(jl,jm){var jn;jn=y.Doc().getElementById(jl);return m.Equals(jn,null)?N.FailWith("invalid id: "+jl):G.RunPrepend(jn,jm);},Select:function(jo,jp,jq,jr){return G.SelectDyn(jo,jp,E.Const(jq),jr);},SelectDyn:function(js,jt,ju,jv){var jw,jx,jB,jC,jD,jH;jw=[$.New(O,{$:0})];jx=function(jy){return function(jz){jy.selectedIndex=c.findIndex(function(jA){return m.Equals(jz,jA);},jw[0]);};};jB=y.CreateElement("select");jC=jv.get_View();jD=z.DynamicCustom(jx,jC);jB.addEventListener("change",function(){return jv.UpdateMaybe(function(jF){var jG;jG=jw[0].get_Item(jB.selectedIndex);return m.Equals(jF,jG)?{$:0}:{$:1,$0:jG};});},false);jH=G.Convert(function(jI){var jJ,jK;jJ=jI[0];jK=G.TextNode(jt(jI[1]));return G.Element("option",B.ofArray([A.Create("value",$$.String(jJ))]),B.ofArray([jK]));},u.Map(function(jL){jw[0]=jL;return c.mapi(function(jM){return function(jN){return[jM,jN];};},jL);},ju));return H.New(jB,A.Append(jD,A.Concat(js)),jH);},SelectDynOptional:function(jO,jP,jQ,jR,jS){return G.SelectDyn(jO,function(jT){return jT.$==1?jQ(jT.$0):jP;},u.Map(function(jU){return $.New(O,{$:1,$0:{$:0},$1:B.map(function(jV){return{$:1,$0:jV};},jU)});},jR),jS);},SelectOptional:function(jW,jX,jY,jZ,j0){return G.Select(jW,function(j1){return j1.$==1?jY(j1.$0):jX;},$.New(O,{$:1,$0:{$:0},$1:B.map(function(j2){return{$:1,$0:j2};},jZ)}),j0);},Static:function(j3){return H.New(j3,A.get_Empty(),G.get_Empty());},SvgElement:function(j4,j5,j6){var j7,j8;j7=A.Concat(j5);j8=G.Concat(j6);return H.New(y.CreateSvgElement(j4),j7,j8);},TextNode:function(j9){return G.Mk({$:5,$0:y.CreateText(j9)},E.Const(null));},TextView:function(j_){var j$,ka;j$=J.CreateTextNode();ka=u.Map(function(kb){return J.UpdateTextNode(j$,kb);},j_);return G.Mk({$:4,$0:j$},ka);},Verbatim:function(kc){var kd,ke,kf;kd=P.parseHTML(kc);ke=m.Equals(kd,null)?[]:kd;kf=function(kg){return function(kh){return{$:0,$0:kg,$1:kh};};};return G.Mk(w.MapReduce(function(ki){return{$:1,$0:J.CreateElemNode(ki,A.get_Empty(),{$:3})};},{$:3},kf,ke),E.Const(null));},get_Empty:function(){return G.Mk({$:3},E.Const(null));}}),DocElemNode:$.Class({Equals:function(kj){return this.ElKey===kj.ElKey;},GetHashCode:function(){return this.ElKey;}}),Docs:{ComputeChangeAnim:function(kk,kl){var km,ko;km=function(kn){return x.HasChangeAnim(kn.Attr);};ko=function(kp){return Q.Filter(km,kp);};return o.Concat(d.map(function(kq){return x.GetChangeAnim(kq.Attr);},Q.ToArray(Q.Intersect(ko(kk.PreviousNodes),ko(kl)))));},ComputeEnterAnim:function(kr,ks){return o.Concat(d.map(function(kt){return x.GetEnterAnim(kt.Attr);},Q.ToArray(Q.Except(kr.PreviousNodes,Q.Filter(function(ku){return x.HasEnterAnim(ku.Attr);},ks)))));},ComputeExitAnim:function(kv,kw){return o.Concat(d.map(function(kx){return x.GetExitAnim(kx.Attr);},Q.ToArray(Q.Except(kw,Q.Filter(function(ky){return x.HasExitAnim(ky.Attr);},kv.PreviousNodes)))));},CreateDelimitedElemNode:function(kz,kA,kB,kC){var kD,kE;kD=kz.parentNode;J.LinkPrevElement(kA,kC);kE=x.Insert(kD,kB);return $.New(R,$.DeleteEmptyFields({Attr:kE,Children:kC,Delimiters:[kz,kA],El:kD,ElKey:h.Int(),Render:$.GetOptional(kE.OnAfterRender).$0},["Render"]));},CreateDelimitedRunState:function(kF,kG,kH){return{PreviousNodes:Q.get_Empty(),Top:J.CreateDelimitedElemNode(kF,kG,A.get_Empty(),kH)};},CreateElemNode:function(kI,kJ,kK){var kL;J.LinkElement(kI,kK);kL=x.Insert(kI,kJ);return $.New(R,$.DeleteEmptyFields({Attr:kL,Children:kK,El:kI,ElKey:h.Int(),Render:$.GetOptional(kL.OnAfterRender).$0},["Render"]));},CreateEmbedNode:function(){return{Current:{$:3},Dirty:false};},CreateRunState:function(kM,kN){return{PreviousNodes:Q.get_Empty(),Top:J.CreateElemNode(kM,A.get_Empty(),kN)};},CreateTextNode:function(){return{Text:y.CreateText(""),Dirty:false,Value:""};},DoSyncElement:function(kO){var kP,kQ,kU,kW;kP=kO.El;kQ=function(kR,kS){var kT;if(kR.$==1){return{$:1,$0:kR.$0.El};}else{if(kR.$==2){kT=kR.$0;if(kT.Dirty){kT.Dirty=false;return J.InsertDoc(kP,kT.Current,kS);}else{return kQ(kT.Current,kS);}}else{return kR.$==3?kS:kR.$==4?{$:1,$0:kR.$0.Text}:kR.$==5?{$:1,$0:kR.$0}:kQ(kR.$0,kQ(kR.$1,kS));}}};kU=kO.El;S.Iter(function(kV){return y.RemoveNode(kU,kV);},S.Except(S.DocChildren(kO),S.Children(kO.El,$.GetOptional(kO.Delimiters))));kW=$.GetOptional(kO.Delimiters);kQ(kO.Children,kW.$==1?{$:1,$0:kW.$0[1]}:{$:0});return;},DomNodes:$.Class({},{Children:function(kX,kY){var kZ,k0,k1,k2,k3;if(kY.$==1){kZ=kY.$0[1];k0=kY.$0[0];k1=b.prototype.constructor.apply(b,[]);k2=k0.nextSibling;while(k2!==kZ){k1.push(k2);k2=k2.nextSibling;}return $.New(S,{$:0,$0:k1});}else{k3=kX.childNodes;return $.New(S,{$:0,$0:d.init(kX.childNodes.length,function(k4){return k3[k4];})});}},DocChildren:function(k5){var k6,k7;k6=[];k7=function(k8){var k9;if(k8.$==2){return k7(k8.$0.Current);}else{if(k8.$==1){return l.Add(k8.$0.El,k6);}else{if(k8.$==3){return null;}else{if(k8.$==5){return l.Add(k8.$0,k6);}else{if(k8.$==4){return l.Add(k8.$0.Text,k6);}else{k9=k8.$1;k7(k8.$0);return k7(k9);}}}}}};k7(k5.Children);return $.New(S,{$:0,$0:l.ToArray(k6)});},Except:function(k_,k$){var la;la=k_.$0;return $.New(S,{$:0,$0:d.filter(function(lb){return c.forall(function(lc){return!(lb===lc);},la);},k$.$0)});},FoldBack:function(ld,le,lf){return d.foldBack(ld,le.$0,lf);},Iter:function(lg,lh){return d.iter(lg,lh.$0);}}),InsertDoc:function(li,lj,lk){var ll;if(lj.$==1){return J.InsertNode(li,lj.$0.El,lk);}else{if(lj.$==2){ll=lj.$0;ll.Dirty=false;return J.InsertDoc(li,ll.Current,lk);}else{return lj.$==3?lk:lj.$==4?J.InsertNode(li,lj.$0.Text,lk):lj.$==5?J.InsertNode(li,lj.$0,lk):J.InsertDoc(li,lj.$0,J.InsertDoc(li,lj.$1,lk));}}},InsertNode:function(lm,ln,lo){y.InsertAt(lm,lo,ln);return{$:1,$0:ln};},LinkElement:function(lp,lq){J.InsertDoc(lp,lq,{$:0});},LinkPrevElement:function(lr,ls){J.InsertDoc(lr.parentNode,ls,{$:1,$0:lr});},NodeSet:$.Class({},{Except:function(lt,lu){return $.New(Q,{$:0,$0:k.Except(lt.$0,lu.$0)});},Filter:function(lv,lw){return $.New(Q,{$:0,$0:k.Filter(lv,lw.$0)});},FindAll:function(lx){var ly,lz;ly=[];lz=function(lA){var lB,lC;if(lA.$==0){lB=lA.$1;lz(lA.$0);return lz(lB);}else{if(lA.$==1){lC=lA.$0;l.Add(lC,ly);return lz(lC.Children);}else{return lA.$==2?lz(lA.$0.Current):null;}}};lz(lx);return $.New(Q,{$:0,$0:j.New(l.ToArray(ly))});},Intersect:function(lD,lE){return $.New(Q,{$:0,$0:k.Intersect(lD.$0,lE.$0)});},IsEmpty:function(lF){return lF.$0.get_Count()===0;},ToArray:function(lG){return k.ToArray(lG.$0);},get_Empty:function(){return $.New(Q,{$:0,$0:j.New11()});}}),PerformAnimatedUpdate:function(lH,lI){return a.Delay(function(){var lK,lL,lM;lK=Q.FindAll(lI);lL=J.ComputeChangeAnim(lH,lK);lM=J.ComputeEnterAnim(lH,lK);return a.Bind(o.Play(o.Append(lL,J.ComputeExitAnim(lH,lK))),function(){J.SyncElemNode(lH.Top);return a.Bind(o.Play(lM),function(){return a.Return(void(lH.PreviousNodes=lK));});});});},Sync:function(lP){var lQ;lQ=function(lR){var lS,lT,lU;if(lR.$==1){lS=lR.$0;J.SyncElement(lS);return lQ(lS.Children);}else{if(lR.$==2){return lQ(lR.$0.Current);}else{if(lR.$==3){return null;}else{if(lR.$==5){return null;}else{if(lR.$==4){lT=lR.$0;if(lT.Dirty){lT.Text.nodeValue=lT.Value;lT.Dirty=false;return;}else{return null;}}else{lU=lR.$1;lQ(lR.$0);return lQ(lU);}}}}}};return lQ(lP);},SyncElemNode:function(lV){J.SyncElement(lV);return J.Sync(lV.Children);},SyncElement:function(lW){var lX,l1;x.Sync(lW.El,lW.Attr);lX=function(lY){var lZ,l0;if(lY.$==0){lZ=lY.$1;return lX(lY.$0)?true:lX(lZ);}else{if(lY.$==2){l0=lY.$0;return l0.Dirty?true:lX(l0.Current);}else{return false;}}};if(lX(lW.Children)){J.DoSyncElement(lW);}l1=$.GetOptional(lW.Render);if(l1.$==1){l1.$0.call(null,lW.El);delete lW.Render;return;}else{return null;}},UpdateEmbedNode:function(l2,l3){l2.Current=l3;l2.Dirty=true;return;},UpdateTextNode:function(l4,l5){l4.Value=l5;l4.Dirty=true;return;}},DomUtility:{AddClass:function(l6,l7){P(l6).addClass(l7);},AppendTo:function(l8,l9){l8.appendChild(l9);},Clear:function(l_){while(l_.hasChildNodes()){l_.removeChild(l_.firstChild);}return;},ClearAttrs:function(l$){while(l$.hasAttributes()){l$.removeAttributeNode(l$.attributes.item(0));}return;},CreateAttr:function(ma,mb){var mc;mc=y.Doc().createAttribute(ma);mc.value=mb;return mc;},CreateElement:function(md){return y.Doc().createElement(md);},CreateSvgElement:function(me){return y.Doc().createElementNS("http://www.w3.org/2000/svg",me);},CreateText:function(mf){return y.Doc().createTextNode(mf);},Doc:$.Field(function(){return F;}),InsertAt:function(mg,mh,mi){var mj,mk,ml;if(mi.parentNode===mg){mk=mi.nextSibling;ml=[mh,m.Equals(mk,null)?{$:0}:{$:1,$0:mk}];mj=ml[0].$==1?ml[1].$==1?ml[0].$0===ml[1].$0:false:ml[1].$==0?true:false;}else{mj=false;}return!mj?mh.$==1?void mg.insertBefore(mi,mh.$0):void mg.appendChild(mi):null;},RemoveAttr:function(mm,mn){return mm.removeAttribute(mn);},RemoveClass:function(mo,mp){P(mo).removeClass(mp);},RemoveNode:function(mq,mr){return mr.parentNode===mq?void mq.removeChild(mr):null;},SetAttr:function(ms,mt,mu){return ms.setAttribute(mt,mu);},SetProperty:function($target,$name,$value){var $0=this,$this=this;return $target.setProperty($name,$value);},SetStyle:function(mv,mw,mx){return y.SetProperty(mv.style,mw,mx);}},DoubleInterpolation:$.Class({Interpolate:function(my,mz,mA){return mz+my*(mA-mz);}}),DynamicAttrNode:$.Class({GetChangeAnim:function(){return o.get_Empty();},GetEnterAnim:function(){return o.get_Empty();},GetExitAnim:function(){return o.get_Empty();},Init:function(mE){return this.init.call(null,mE);},Sync:function(mF){if(this.dirty){(this.push.call(null,mF))(this.value);this.dirty=false;return;}else{return null;}},get_Changed:function(){return this.updates;}},{New:function(mG,mH,mI){var mJ;mJ=$.New(this,{});mJ.init=mH;mJ.push=mI;mJ.value=g.U();mJ.dirty=true;mJ.updates=u.Map(function(mK){mJ.value=mK;mJ.dirty=true;return;},mG);return mJ;}}),Easing:$.Class({},{Custom:function(mL){return $.New(T,{TransformTime:mL});},get_CubicInOut:function(){return U.CubicInOut();}}),Easings:{CubicInOut:$.Field(function(){return $.New(T,{TransformTime:function(mM){var mN;mN=mM*mM;return 3*mN-2*(mN*mM);}});})},Elt:$.Class({AddClass:function($cls){var $this=this;return $this.elt.className+=" "+$cls;},Append:function(mO){var mP;mP=this.get_DocElemNode();mP.Children={$:0,$0:mP.Children,$1:mO.get_DocNode()};V.Set(this.rvUpdates,u.Map2(function(){return function(){return null;};},V.Get(this.rvUpdates),mO.get_Updates()));J.InsertDoc(this.elt,mO.get_DocNode(),{$:0});return;},Clear:function(){this.get_DocElemNode().Children={$:3};V.Set(this.rvUpdates,E.Const(null));while(this.elt.hasChildNodes()){this.elt.removeChild(this.elt.firstChild);}return;},GetAttribute:function(mS){return this.elt.getAttribute(mS);},GetProperty:function(mT){return this.elt[mT];},GetText:function(){return this.elt.textContent;},GetValue:function(){return this.elt.value;},HasAttribute:function(mU){return this.elt.hasAttribute(mU);},HasClass:function(mV){return(new W("(\\s|^)"+mV+"(\\s|$)")).test(this.elt.className);},Html:function(){return this.elt.outerHTML;},Id:function(){return this.elt.id;},OnAfterRender:function(mW){var mX,mY,mZ;mX=$.GetOptional(this.get_DocElemNode().Render);if(mX.$==1){mZ=mX.$0;mY={$:1,$0:function(m0){mZ(m0);return mW(m0);}};}else{mY={$:1,$0:mW};}$.SetOptional(this.get_DocElemNode(),"Render",mY);return this;},Prepend:function(m1){var m2,m5,m6;m2=this.get_DocElemNode();m2.Children={$:0,$0:m1.get_DocNode(),$1:m2.Children};V.Set(this.rvUpdates,u.Map2(function(){return function(){return null;};},V.Get(this.rvUpdates),m1.get_Updates()));m5=this.elt.firstChild;m6=m.Equals(m5,null)?{$:0}:{$:1,$0:m5};J.InsertDoc(this.elt,m1.get_DocNode(),m6);return;},RemoveAttribute:function(m7){return this.elt.removeAttribute(m7);},RemoveClass:function(m8){this.elt.className=this.elt.className.replace(new W("(\\s|^)"+m8+"(\\s|$)")," ");},SetAttribute:function(m9,m_){return this.elt.setAttribute(m9,m_);},SetProperty:function(m$,na){this.elt[m$]=na;},SetStyle:function(nb,nc){this.elt.style[nb]=nc;},SetText:function(nd){this.get_DocElemNode().Children={$:3};V.Set(this.rvUpdates,E.Const(null));this.elt.textContent=nd;return;},SetValue:function(ne){this.elt.value=ne;},get_DocElemNode:function(){var nf;nf=this.docNode1;return nf.$==1?nf.$0:N.FailWith("Elt: Invalid docNode");},get_Element:function(){return this.elt;},on:function(ng,nh){this.elt.addEventListener(ng,nh(this.elt),false);return this;}},{New:function(ni,nj,nk){var nl,nm,nn,no,nr;nl=J.CreateElemNode(ni,nj,nk.get_DocNode());nm=X.Create(nk.get_Updates());nn=x.Updates(nl.Attr);no=function(){return function(){return null;};};nr=E.Bind(function(ns){return u.Map2(no,nn,ns);},nm.get_View());return H.New1({$:1,$0:nl},nr,ni,nm,nn);},New1:function(nt,nu,nv,nw){var ny;ny=$.New(this,G.New(nt,nu));ny.docNode1=nt;ny.elt=nv;ny.rvUpdates=nw;return ny;}}),Flow:$.Class({},{Bind:function(nz,nA){return{Render:function(nB){return function(nC){return(nz.Render.call(null,nB))(function(nD){return(nA(nD).Render.call(null,nB))(nC);});};}};},Map:function(nE,nF){return{Render:function(nG){return function(nH){return(nF.Render.call(null,nG))(function(nI){return nH(nE(nI));});};}};},Return:function(nJ){return{Render:function(){return function(nL){return nL(nJ);};}};},get_Do:function(){return Y.New();}}),Flow1:$.Class({},{Define:function(nM){return{Render:function(nN){return function(nO){return V.Set(nN,nM(nO));};}};},Embed:function(nP){var nQ;nQ=X.Create(G.get_Empty());(nP.Render.call(null,nQ))(function(){});return G.EmbedView(nQ.get_View());},Static:function(nS){return{Render:function(nT){return function(nU){V.Set(nT,nS);return nU(null);};}};}}),FlowBuilder:$.Class({Bind:function(nV,nW){return Z.Bind(nV,nW);},Return:function(nX){return Z.Return(nX);},ReturnFrom:function(nY){return nY;}},{New:function(){return $.New(this,{});}}),Html:{attr:$.Class({},{New:function(){return $.New(this,{});}})},Input:{ActivateButtonListener:$.Field(function(){var nZ,n3;nZ=function(n0,n1){var n2;n2=n0.button;return n2===0?V.Set(_0.MouseBtnSt1().Left,n1):n2===1?V.Set(_0.MouseBtnSt1().Middle,n1):n2===2?V.Set(_0.MouseBtnSt1().Right,n1):null;};if(!_0.MouseBtnSt1().Active){_0.MouseBtnSt1().Active=true;F.addEventListener("mousedown",function(n4){return nZ(n4,true);},false);n3=F.addEventListener("mouseup",function(n5){return nZ(n5,false);},false);}else{n3=null;}return n3;}),ActivateKeyListener:$.Field(function(){var n6;if(!_0.KeyListenerState().KeyListenerActive){P(F).keydown(function(n7){var n8,n9;n8=n7.which;V.Set(_0.KeyListenerState().LastPressed,n8);n9=V.Get(_0.KeyListenerState().KeysPressed);return!c.exists(function(n_){return n_===n8;},n9)?V.Set(_0.KeyListenerState().KeysPressed,B.append(n9,B.ofArray([n8]))):null;});n6=void P(F).keyup(function(n$){var oa,ob,od;oa=n$.which;ob=function(oc){return oc!==oa;};od=function(oe){return B.filter(ob,oe);};return V.Update(_0.KeyListenerState().KeysPressed,od);});}else{n6=null;}return n6;}),KeyListenerState:$.Field(function(){return{KeysPressed:X.Create($.New(O,{$:0})),KeyListenerActive:false,LastPressed:X.Create(-1)};}),Keyboard:$.Class({},{IsPressed:function(of){var og;_0.ActivateKeyListener();og=function(oh){return oh===of;};return u.Map(function(oi){return c.exists(og,oi);},_0.KeyListenerState().KeysPressed.get_View());},get_KeysPressed:function(){_0.ActivateKeyListener();return _0.KeyListenerState().KeysPressed.get_View();},get_LastPressed:function(){_0.ActivateKeyListener();return _0.KeyListenerState().LastPressed.get_View();}}),Mouse:$.Class({},{get_LeftPressed:function(){_0.ActivateButtonListener();return _0.MouseBtnSt1().Left.get_View();},get_MiddlePressed:function(){_0.ActivateButtonListener();return _0.MouseBtnSt1().Middle.get_View();},get_MousePressed:function(){_0.ActivateButtonListener();return E.Apply(E.Apply(E.Apply(E.Const(function(oj){return function(ok){return function(ol){return(oj?true:ok)?true:ol;};};}),_0.MouseBtnSt1().Left.get_View()),_0.MouseBtnSt1().Middle.get_View()),_0.MouseBtnSt1().Right.get_View());},get_Position:function(){var om;om=function(on){return V.Set(_0.MousePosSt1().PosV,[on.clientX,on.clientY]);};if(!_0.MousePosSt1().Active){F.addEventListener("mousemove",om,false);_0.MousePosSt1().Active=true;}return _0.MousePosSt1().PosV.get_View();},get_RightPressed:function(){_0.ActivateButtonListener();return _0.MouseBtnSt1().Right.get_View();}}),MouseBtnSt1:$.Field(function(){return{Active:false,Left:X.Create(false),Middle:X.Create(false),Right:X.Create(false)};}),MousePosSt1:$.Field(function(){return{Active:false,PosV:X.Create([0,0])};})},Interpolation1:$.Class({},{get_Double:function(){return $.New(_1,{$:0});}}),Key:$.Class({},{Fresh:function(){return $.New(_2,{$:0,$0:h.Int()});}}),ListModel:$.Class({Add:function(oo){var op,or=this;op=V.Get(this.Var);return!_3.Contains(this.get_Key(),oo,op)?V.Set(this.Var,this.Storage.Add(oo,op)):V.Set(this.Var,this.Storage.SetAt(d.findINdex(function(oq){return m.Equals((or.get_Key())(oq),(or.get_Key())(oo));},op),oo,op));},Clear:function(){return V.Set(this.Var,this.Storage.Set(c.empty()));},ContainsKey:function(os){var ou=this;return c.exists(function(ot){return m.Equals(ou.key.call(null,ot),os);},V.Get(ou.Var));},ContainsKeyAsView:function(ov){var ow,oy=this;ow=function(ox){return m.Equals(oy.key.call(null,ox),ov);};return u.Map(function(oz){return c.exists(ow,oz);},oy.Var.get_View());},Find:function(oA){return d.find(oA,V.Get(this.Var));},FindAsView:function(oB){return u.Map(function(oC){return d.find(oB,oC);},this.Var.get_View());},FindByKey:function(oD){var oF=this;return d.find(function(oE){return m.Equals(oF.key.call(null,oE),oD);},V.Get(oF.Var));},FindByKeyAsView:function(oG){var oH,oJ=this;oH=function(oI){return m.Equals(oJ.key.call(null,oI),oG);};return u.Map(function(oK){return d.find(oH,oK);},oJ.Var.get_View());},Iter:function(oL){return d.iter(oL,V.Get(this.Var));},Lens:function(oM){return this.LensInto(function(oN){return oN;},function(){return function(oP){return oP;};},oM);},LensInto:function(oQ,oR,oS){return _4.New(this,oS,oQ,oR);},Remove:function(oT){var oU,oV,oW;oU=V.Get(this.Var);if(_3.Contains(this.key,oT,oU)){oV=this.key;oW=oV(oT);return V.Set(this.Var,this.Storage.RemoveIf(function(oX){return!m.Equals(oV(oX),oW);},oU));}else{return null;}},RemoveBy:function(oY){return V.Set(this.Var,this.Storage.RemoveIf(function(oZ){return!oY(oZ);},V.Get(this.Var)));},RemoveByKey:function(o0){var o2=this;return V.Set(this.Var,this.Storage.RemoveIf(function(o1){return!m.Equals((o2.get_Key())(o1),o0);},V.Get(o2.Var)));},Set:function(o3){return V.Set(this.Var,this.Storage.Set(o3));},TryFind:function(o4){return d.tryFind(o4,V.Get(this.Var));},TryFindAsView:function(o5){return u.Map(function(o6){return d.tryFind(o5,o6);},this.Var.get_View());},TryFindByKey:function(o7){var o9=this;return d.tryFind(function(o8){return m.Equals(o9.key.call(null,o8),o7);},V.Get(o9.Var));},TryFindByKeyAsView:function(o_){var o$,pb=this;o$=function(pa){return m.Equals(pb.key.call(null,pa),o_);};return u.Map(function(pc){return d.tryFind(o$,pc);},pb.Var.get_View());},UpdateAll:function(pd){var pi=this;return V.Update(this.Var,function(pe){d.iteri(function(pf){return function(pg){return t.iter(function(ph){return d.set(pe,pf,ph);},pd(pg));};},pe);return pi.Storage.Set(pe);});},UpdateBy:function(pj,pk){var pl,pm,po=this,pp,pq;pl=V.Get(this.Var);pm=d.tryFindIndex(function(pn){return m.Equals(po.key.call(null,pn),pk);},pl);if(pm.$==1){pp=pm.$0;pq=pj(d.get(pl,pp));return pq.$==1?V.Set(po.Var,po.Storage.SetAt(pp,pq.$0,pl)):null;}else{return null;}},get_Key:function(){return this.key;},get_Length:function(){return d.length(V.Get(this.Var));},get_LengthAsView:function(){return u.Map(function(pr){return d.length(pr);},this.Var.get_View());},get_View:function(){return this.view;}},{Create:function(ps,pt){return _5.CreateWithStorage(ps,_6.InMemory(c.toArray(pt)));},CreateWithStorage:function(pu,pv){var pw;pw=X.Create(c.toArray(I.distinctBy(pu,pv.Init())));return $.New(_5,{key:pu,Var:pw,Storage:pv,view:u.Map(function(px){pv.Set(px);return px.slice();},pw.get_View())});},FromSeq:function(py){return _5.Create(function(pz){return pz;},py);}}),ListModel1:$.Class({},{Key:function(pA){return pA.key;},View:function(pB){return pB.view;}}),ListModels:{Contains:function(pC,pD,pE){var pF;pF=pC(pD);return c.exists(function(pG){return m.Equals(pC(pG),pF);},pE);}},Model:$.Class({get_View:function(){return _7.View(this);}},{Create:function(pH,pI){var pJ;pJ=X.Create(pI);return $.New(_7,{$:0,$0:pJ,$1:u.Map(pH,pJ.get_View())});},Update:function(pK,pL){return V.Update(pL.$0,function(pM){pK(pM);return pM;});},View:function(pN){return pN.$1;}}),ReactiveExtensions:$.Class({},{New:function(){return $.New(this,{});}}),RefImpl:$.Class({Get:function(){return this.get.call(null,this.baseRef.Get());},Set:function(pO){var pQ=this;return this.baseRef.Update(function(pP){return(pQ.update.call(null,pP))(pO);});},Update:function(pR){var pT=this;return this.baseRef.Update(function(pS){return(pT.update.call(null,pS))(pR(pT.get.call(null,pS)));});},UpdateMaybe:function(pU){var pW=this;return this.baseRef.UpdateMaybe(function(pV){return t.map(pW.update.call(null,pV),pU(pW.get.call(null,pV)));});},get_Id:function(){return this.id;},get_View:function(){return u.Map(this.get,this.baseRef.get_View());}},{New:function(pX,pY,pZ){var p0;p0=$.New(this,{});p0.baseRef=pX;p0.get=pY;p0.update=pZ;p0.id=h.Id();return p0;}}),RefImpl1:$.Class({Get:function(){return this.get.call(null,this.m.FindByKey(this.key));},Set:function(p1){var p3=this;return this.m.UpdateBy(function(p2){return{$:1,$0:(p3.update.call(null,p2))(p1)};},p3.key);},Update:function(p4){var p6=this;return this.m.UpdateBy(function(p5){return{$:1,$0:(p6.update.call(null,p5))(p4(p6.get.call(null,p5)))};},p6.key);},UpdateMaybe:function(p7){var p9=this;return this.m.UpdateBy(function(p8){return t.map(p9.update.call(null,p8),p7(p9.get.call(null,p8)));},p9.key);},get_Id:function(){return this.id;},get_View:function(){return u.Map(this.get,this.m.FindByKeyAsView(this.key));}},{New:function(p_,p$,qa,qb){var qc;qc=$.New(this,{});qc.m=p_;qc.key=p$;qc.get=qa;qc.update=qb;qc.id=h.Id();return qc;}}),Route:{Append:function(qd,qe){return{$:0,$0:p.Append(qd.$0,qe.$0)};},FromList:function(qf){return{$:0,$0:p.FromArray(d.ofSeq(qf))};},MakeHash:function(qg){return _8.concat("/",d.map(function(qh){return _9(qh);},p.ToArray(qg.$0)));},NoHash:function(qi){return _8.StartsWith(qi,"#")?qi.substring(1):qi;},ParseHash:function(qj){return{$:0,$0:p.FromArray(d.map(function(qk){return _(qk);},_8.SplitChars(ba.NoHash(qj),[47],1)))};},SameHash:function(ql,qm){return ba.NoHash(ql)===ba.NoHash(qm);},ToList:function(qn){return B.ofArray(p.ToArray(qn.$0));}},RouteMap1:$.Class({},{Create:function(qo,qp){return{Des:qp,Ser:qo};},Install:function(qq){return bb.InstallMap(qq);}}),Router:$.Class({},{Dir:function(qr,qs){return bc.Prefix(qr,bd.Merge(qs));},Install:function(qt,qu){return bb.Install(qt,qu);},Merge:function(qv){return bb.MergeRouters(qv);}}),Router1:$.Class({},{Prefix:function(qw,qx){return{$:0,$0:qx.$0,$1:be.Prefix(qw,qx.$1)};},Route:function(qy,qz,qA){return bb.DefineRoute(qy,qz,qA);}}),Routing:{ComputeBodies:function(qB){var qC;qC=bf.New12();d.iter(function(qD){return qC.set_Item(qD.RouteId,qD);},be.ToArray(qB));return qC;},DefineRoute:function(qE,qF,qG){var qH,qI,qJ,qK;qH=X.Create(qF);qI=h.Int();qJ=(qG({$:0,$0:qI}))(qH);qK=be.Leaf({$:0,$0:qI,$1:function(qL){E.Sink(function(qM){return qL.UpdateRoute.call(null,bb.DoLink(qE,qM));},qH.get_View());return{OnRouteChanged:function(qN){return V.Set(qH,bb.DoRoute(qE,qN));},OnSelect:function(){return qL.UpdateRoute.call(null,bb.DoLink(qE,V.Get(qH)));},RouteId:qI,RouteValue:qJ};}});return{$:0,$0:{$:1,$0:qJ},$1:qK};},DoLink:function(qP,qQ){return ba.FromList(qP.Ser.call(null,qQ));},DoRoute:function(qR,qS){return qR.Des.call(null,ba.ToList(qS));},Install:function(qT,qU){var qV,qW,qX,q0,q1,q6,q8,q9,q_,ra;qV=qU.$0;qW=qU.$1;qX=bb.InstallMap({Des:function(qY){return ba.FromList(qY);},Ser:function(qZ){return ba.ToList(qZ);}});q0={Bodies:g.U(),CurrentRoute:qX,CurrentSite:0,Selection:g.U()};q1=be.Map(function(q2){return function(q3){var q4;q4=q3.$0;return q3.$1.call(null,{UpdateRoute:function(q5){return bb.OnInternalSiteUpdate(q0,q4,q2,q5);}});};},qW);q0.Bodies=bb.ComputeBodies(q1);q6=function(q7){return be.Lookup(q1,ba.ToList(q7));};q8=q6(V.Get(qX));if(q8.$==0){q_=q8.$0;q0.CurrentSite=q_.RouteId;q9=X.Create(q_.RouteValue);}else{q9=X.Create(qV.$==1?qV.$0:N.FailWith("Site.Install fails on empty site"));}q0.Selection=q9;E.Sink(function(q$){return bb.OnSelectSite(q0,qT(q$));},q9.get_View());ra=function(rb){var rc;rc=q6(rb);return rc.$==1?null:bb.OnGlobalRouteChange(q0,rc.$0,ba.FromList(rc.$1));};ra(V.Get(qX));E.Sink(ra,qX.get_View());return q9;},InstallMap:function(rd){var re,rg,rh;re=function(){return rd.Des.call(null,ba.ToList(ba.ParseHash(bg.location.hash)));};rg=X.Create(re(null));rh=function(){var rj;rj=re(null);return!m.Equals(rd.Ser.call(null,V.Get(rg)),rd.Ser.call(null,rj))?V.Set(rg,rj):null;};bg.onpopstate=rh;bg.onhashchange=rh;E.Sink(function(rk){var rl;rl=ba.MakeHash(ba.FromList(rd.Ser.call(null,rk)));return!ba.SameHash(bg.location.hash,rl)?void(bg.location.hash=rl):null;},rg.get_View());return rg;},MergeRouters:function(rm){var rn,ro,rq;rn=c.toArray(rm);ro=be.Merge(c.map(function(rp){return rp.$1;},rn));rq=c.tryPick(function(rr){return rr.$0;},rn);return ro.$==1?{$:0,$0:rq,$1:ro.$0}:N.FailWith("Invalid Site.Merge: need more prefix disambiguation");},OnGlobalRouteChange:function(rs,rt,ru){if(rs.CurrentSite!==rt.RouteId){rs.CurrentSite=rt.RouteId;V.Set(rs.Selection,rt.RouteValue);}return rt.OnRouteChanged.call(null,ru);},OnInternalSiteUpdate:function(rv,rw,rx,ry){return rv.CurrentSite===rw?bb.SetCurrentRoute(rv,ba.Append(ba.FromList(rx),ry)):null;},OnSelectSite:function(rz,rA){var rB;rB=rA.$0;if(rz.CurrentSite!==rB){rz.CurrentSite=rB;return rz.Bodies.get_Item(rB).OnSelect.call(null,null);}else{return null;}},SetCurrentRoute:function(rC,rD){return!m.Equals(V.Get(rC.CurrentRoute),rD)?V.Set(rC.CurrentRoute,rD):null;}},Snap1:{Bind:function(rE,rF){var rG,rH;rG=bh.Create();rH=function(){return bh.MarkObsolete(rG);};bh.When(rF,function(rJ){var rK;rK=rE(rJ);return bh.When(rK,function(rL){return(bh.IsForever(rK)?bh.IsForever(rF):false)?bh.MarkForever(rG,rL):bh.MarkReady(rG,rL);},rH);},rH);return rG;},Create:function(){return bh.Make({$:3,$0:[],$1:[]});},CreateForever:function(rM){return bh.Make({$:0,$0:rM});},CreateWithValue:function(rN){return bh.Make({$:2,$0:rN,$1:[]});},IsForever:function(rO){return rO.State.$==0?true:false;},IsObsolete:function(rP){return rP.State.$==1?true:false;},Make:function(rQ){return{State:rQ};},Map:function(rR,rS){var rT,rU;rT=rS.State;if(rT.$==0){return bh.CreateForever(rR(rT.$0));}else{rU=bh.Create();bh.When(rS,function(rV){return bh.MarkDone(rU,rS,rR(rV));},function(){return bh.MarkObsolete(rU);});return rU;}},Map2:function(rX,rY,rZ){var r0,r1,r2,r4,r5,r6,r7,r9;r0=[rY.State,rZ.State];if(r0[0].$==0){if(r0[1].$==0){r1=r0[1].$0;return bh.CreateForever((rX(r0[0].$0))(r1));}else{return bh.Map(rX(r0[0].$0),rZ);}}else{if(r0[1].$==0){r2=r0[1].$0;return bh.Map(function(r3){return(rX(r3))(r2);},rY);}else{r4=bh.Create();r5=[{$:0}];r6=[{$:0}];r7=function(){r5[0]={$:0};r6[0]={$:0};return bh.MarkObsolete(r4);};r9=function(){var r$,sa,sb;r$=[r5[0],r6[0]];if(r$[0].$==1){if(r$[1].$==1){sa=r$[0].$0;sb=r$[1].$0;return(bh.IsForever(rY)?bh.IsForever(rZ):false)?bh.MarkForever(r4,(rX(sa))(sb)):bh.MarkReady(r4,(rX(sa))(sb));}else{return null;}}else{return null;}};bh.When(rY,function(sc){r5[0]={$:1,$0:sc};return r9(null);},r7);bh.When(rZ,function(sd){r6[0]={$:1,$0:sd};return r9(null);},r7);return r4;}}},Map3:function(se,sf,sg,sh){var si,sj,sk,sl,sm,so,sp,sr,su,sv,sx,sA,sD,sE,sF,sG,sH,sJ;si=[sf.State,sg.State,sh.State];if(si[0].$==0){if(si[1].$==0){if(si[2].$==0){sj=si[1].$0;sk=si[2].$0;return bh.CreateForever(((se(si[0].$0))(sj))(sk));}else{sl=si[0].$0;sm=si[1].$0;return bh.Map(function(sn){return((se(sl))(sm))(sn);},sh);}}else{if(si[2].$==0){so=si[0].$0;sp=si[2].$0;return bh.Map(function(sq){return((se(so))(sq))(sp);},sg);}else{sr=si[0].$0;return bh.Map2(function(ss){return function(st){return((se(sr))(ss))(st);};},sg,sh);}}}else{if(si[1].$==0){if(si[2].$==0){su=si[1].$0;sv=si[2].$0;return bh.Map(function(sw){return((se(sw))(su))(sv);},sf);}else{sx=si[1].$0;return bh.Map2(function(sy){return function(sz){return((se(sy))(sx))(sz);};},sf,sh);}}else{if(si[2].$==0){sA=si[2].$0;return bh.Map2(function(sB){return function(sC){return((se(sB))(sC))(sA);};},sf,sg);}else{sD=bh.Create();sE=[{$:0}];sF=[{$:0}];sG=[{$:0}];sH=function(){sE[0]={$:0};sF[0]={$:0};sG[0]={$:0};return bh.MarkObsolete(sD);};sJ=function(){var sL,sM,sN,sO;sL=[sE[0],sF[0],sG[0]];if(sL[0].$==1){if(sL[1].$==1){if(sL[2].$==1){sM=sL[0].$0;sN=sL[1].$0;sO=sL[2].$0;return((bh.IsForever(sf)?bh.IsForever(sg):false)?bh.IsForever(sh):false)?bh.MarkForever(sD,((se(sM))(sN))(sO)):bh.MarkReady(sD,((se(sM))(sN))(sO));}else{return null;}}else{return null;}}else{return null;}};bh.When(sf,function(sP){sE[0]={$:1,$0:sP};return sJ(null);},sH);bh.When(sg,function(sQ){sF[0]={$:1,$0:sQ};return sJ(null);},sH);bh.When(sh,function(sR){sG[0]={$:1,$0:sR};return sJ(null);},sH);return sD;}}}},MapAsync:function(sS,sT){var sU;sU=bh.Create();bh.When(sT,function(sV){return bi.StartTo(sS(sV),function(sW){return bh.MarkDone(sU,sT,sW);});},function(){return bh.MarkObsolete(sU);});return sU;},MapCached:function(sY,sZ,s0){return bh.Map(function(s1){var s2,s3,s4;s2=sY[0];if(s2.$==1){if(m.Equals(s1,s2.$0[0])){return s2.$0[1];}else{s3=sZ(s1);sY[0]={$:1,$0:[s1,s3]};return s3;}}else{s4=sZ(s1);sY[0]={$:1,$0:[s1,s4]};return s4;}},s0);},MarkDone:function(s5,s6,s7){return bh.IsForever(s6)?bh.MarkForever(s5,s7):bh.MarkReady(s5,s7);},MarkForever:function(s8,s9){var s_,s$;s_=s8.State;if(s_.$==3){s$=s_.$0;s8.State={$:0,$0:s9};return l.Iter(function(ta){return ta(s9);},s$);}else{return null;}},MarkObsolete:function(tb){var tc,td,tf;tc=tb.State;if(tc.$==1){return null;}else{if(tc.$==2){td=tc.$1;tb.State={$:1};return l.Iter(function(te){return te(null);},td);}else{if(tc.$==3){tf=tc.$1;tb.State={$:1};return l.Iter(function(tg){return tg(null);},tf);}else{return null;}}}},MarkReady:function(th,ti){var tj,tk;tj=th.State;if(tj.$==3){tk=tj.$0;th.State={$:2,$0:ti,$1:tj.$1};return l.Iter(function(tl){return tl(ti);},tk);}else{return null;}},Sequence:function(tm){var tn,to,tp,tq,tr,ts;tn=bh.Create();to=d.ofSeq(tm);tp=d.length(to);tq=[0];tr=[[]];ts=function(){tq[0]=0;tr[0]=[];return bh.MarkObsolete(tn);};d.iteri(function(tu){return function(tv){return bh.When(tv,function(tw){tr[0][tu]=tw;bj.incr(tq);return tq[0]===tp?c.forall(function(tx){return bh.IsForever(tx);},to)?bh.MarkForever(tn,tr[0]):bh.MarkReady(tn,tr[0]):null;},ts);};},to);return tn;},SnapshotOn:function(ty,tz){var tA,tB,tC,tD,tE;tA=[ty.State,tz.State];if(tA[1].$==0){return bh.CreateForever(tA[1].$0);}else{tB=bh.Create();tC=[{$:0}];tD=[false];tE=function(){var tG;if(tD[0]){tG=tC[0];return tG.$==1?bh.IsForever(tz)?bh.MarkForever(tB,tG.$0):tG.$==1?bh.MarkReady(tB,tG.$0):null:tG.$==1?bh.MarkReady(tB,tG.$0):null;}else{return null;}};bh.When(ty,function(){tD[0]=true;return tE(null);},function(){tC[0]={$:0};return bh.MarkObsolete(tB);});bh.When(tz,function(tJ){tC[0]={$:1,$0:tJ};return tE(null);},function(){});return tB;}},When:function(tL,tM,tN){var tO,tP,tQ;tO=tL.State;if(tO.$==1){return tN(null);}else{if(tO.$==2){tP=tO.$0;l.Add(tN,tO.$1);return tM(tP);}else{if(tO.$==3){tQ=tO.$1;l.Add(tM,tO.$0);return l.Add(tN,tQ);}else{return tM(tO.$0);}}}}},Storage1:{ArrayStorage:$.Class({Add:function(tR,tS){tS.push(tR);return tS;},Init:function(){return this.init;},RemoveIf:function(tT,tU){return d.filter(tT,tU);},Set:function(tV){return c.toArray(tV);},SetAt:function(tW,tX,tY){d.set(tY,tW,tX);return tY;}},{New:function(tZ){var t0;t0=$.New(this,{});t0.init=tZ;return t0;}}),InMemory:function(t1){return bk.New(t1);},LocalStorage:function(t2,t3){return bl.New(t2,t3);},LocalStorageBackend:$.Class({Add:function(t4,t5){t5.push(t4);return this.set(t5);},Init:function(){var t6,t7;t6=this.storage.getItem(this.id);if(t6===null){return[];}else{try{return d.map(this.serializer.Decode,bm.parse(t6));}catch(t7){return[];}}},RemoveIf:function(t8,t9){return this.set(d.filter(t8,t9));},Set:function(t_){return this.set(c.toArray(t_));},SetAt:function(t$,ua,ub){d.set(ub,t$,ua);return this.set(ub);},clear:function(){return this.storage.removeItem(this.id);},set:function(uc){this.storage.setItem(this.id,bm.stringify(d.map(this.serializer.Encode,uc)));return uc;}},{New:function(ud,ue){var uf;uf=$.New(this,{});uf.id=ud;uf.serializer=ue;uf.storage=bg.localStorage;return uf;}})},String:{isBlank:function(ug){return _8.forall(function(uh){return bn.IsWhiteSpace(uh);},ug);}},Submitter:$.Class({Trigger:function(){return V.Set(this["var"],null);},get_Input:function(){return this.input;},get_View:function(){return this.view;}},{Create:function(ui,uj){return bo.New(ui,uj);},CreateOption:function(uk){return bo.New(u.Map(function(ul){return{$:1,$0:ul};},uk),{$:0});},New:function(um,un){var uo,up;uo=$.New(this,{});uo.input=um;uo["var"]=X.Create(null);up=uo.input;uo.view=u.SnapshotOn(un,uo["var"].get_View(),up);return uo;},Trigger:function(uq){return uq.Trigger();},View:function(ur){return ur.get_View();}}),Submitter1:$.Class({},{Input:function(us){return us.get_Input();}}),Trans:$.Class({},{AnimateChange:function(ut,uu,uv){return(ut.TChange.call(null,uu))(uv);},AnimateEnter:function(uw,ux){return uw.TEnter.call(null,ux);},AnimateExit:function(uy,uz){return uy.TExit.call(null,uz);},CanAnimateChange:function(uA){return(uA.TFlags&1)!==0;},CanAnimateEnter:function(uB){return(uB.TFlags&2)!==0;},CanAnimateExit:function(uC){return(uC.TFlags&4)!==0;},Create:function(uD){return{TChange:uD,TEnter:function(uE){return o.Const(uE);},TExit:function(uF){return o.Const(uF);},TFlags:1};},Trivial:function(){return{TChange:function(){return function(uH){return o.Const(uH);};},TEnter:function(uI){return o.Const(uI);},TExit:function(uJ){return o.Const(uJ);},TFlags:0};}}),Trans1:$.Class({},{Change:function(uK,uL){return{TChange:uK,TEnter:uL.TEnter,TExit:uL.TExit,TFlags:uL.TFlags|1};},Enter:function(uM,uN){return{TChange:uN.TChange,TEnter:uM,TExit:uN.TExit,TFlags:uN.TFlags|2};},Exit:function(uO,uP){return{TChange:uP.TChange,TEnter:uP.TEnter,TExit:uO,TFlags:uP.TFlags|4};}}),Trie1:{AllSome:function(uQ){var uR,uS,uT,uU;uR=bp.Get(uQ);uS=br.New2();uT=true;while(uT?uR.MoveNext():false){uU=uR.get_Current();if(uU.$==1){uS.Add(uU.$0);}else{uT=false;}}return uT?{$:1,$0:uS.ToArray()}:{$:0};},Empty:function(){return{$:1};},IsLeaf:function(uV){return uV.$==2?true:false;},Leaf:function(uW){return{$:2,$0:uW};},Look:function(uX,uY){var uZ,u0,u1;uZ=[uY,uX];if(uZ[0].$==2){return{$:0,$0:uZ[0].$0,$1:uX};}else{if(uZ[0].$==0){if(uZ[1].$==1){u0=uZ[1].$1;u1=bs.TryFind(uZ[1].$0,uZ[0].$0);return u1.$==0?{$:1}:be.Look(u0,u1.$0);}else{return{$:1};}}else{return{$:1};}}},Lookup:function(u2,u3){return be.Look(c.toList(u3),u2);},Map:function(u4,u5){return be.MapLoop($.New(O,{$:0}),u4,u5);},MapLoop:function(u6,u7,u8){var u9;if(u8.$==1){return{$:1};}else{if(u8.$==2){u9=u8.$0;return{$:2,$0:(u7(u6))(u9)};}else{return be.TrieBranch(bs.Map(function(u_){return function(u$){return be.MapLoop(B.append(u6,B.ofArray([u_])),u7,u$);};},u8.$0));}}},Mapi:function(va,vb){var vc;vc=[0];return be.Map(function(vd){var ve;ve=vc[0];vc[0]=ve+1;return(va(ve))(vd);},vb);},Merge:function(vf){var vg,vh;vg=c.toArray(vf);vh=d.length(vg);return vh===0?{$:1,$0:{$:1}}:vh===1?{$:1,$0:d.get(vg,0)}:c.exists(function(vi){return be.IsLeaf(vi);},vg)?{$:0}:t.map(function(vj){return be.TrieBranch(vj);},be.MergeMaps(function(vk){return be.Merge(vk);},c.choose(function(vl){return vl.$==0?{$:1,$0:vl.$0}:{$:0};},vg)));},MergeMaps:function(vm,vn){var vo;vo=c.collect(function(vp){return bs.ToSeq(vp);},vn);return t.map(function(vq){return bs.OfArray(c.toArray(vq));},be.AllSome(c.map(function(vr){var vs;vs=vr[0];return t.map(function(vt){return[vs,vt];},vm(vr[1]));},bs.ToSeq(c.fold(function(vu){return function(vv){return be.MultiAdd(vv[0],vv[1],vu);};},bt.New1([]),vo)))));},MultiAdd:function(vw,vx,vy){return vy.Add(vw,$.New(O,{$:1,$0:vx,$1:be.MultiFind(vw,vy)}));},MultiFind:function(vz,vA){return N.DefaultArg(bs.TryFind(vz,vA),$.New(O,{$:0}));},Prefix:function(vB,vC){return be.TrieBranch(bt.New1(B.ofArray([[vB,vC]])));},ToArray:function(vD){var vE;vE=[];be.Map(function(){return function(vG){return l.Add(vG,vE);};},vD);return l.ToArray(vE);},TrieBranch:function(vH){return vH.get_IsEmpty()?{$:1}:{$:0,$0:vH};}},Var:$.Class({Get:function(){return V.Get(this);},Set:function(vI){return V.Set(this,vI);},Update:function(vJ){return V.Update(this,vJ);},UpdateMaybe:function(vK){var vL;vL=vK(V.Get(this));return vL.$==1?V.Set(this,vL.$0):null;},get_Id:function(){return"uinref"+$$.String(V.GetId(this));},get_View:function(){var vN=this;return{$:0,$0:function(){return V.Observe(vN);}};},get_View1:function(){return this.get_View();}},{Create:function(vO){return $.New(X,{Const:false,Current:vO,Snap:bh.CreateWithValue(vO),Id:h.Int()});}}),Var1:$.Class({},{Get:function(vP){return vP.Current;},GetId:function(vQ){return vQ.Id;},Lens:function(vR,vS,vT){return bu.New(vR,vS,vT);},Observe:function(vU){return vU.Snap;},Set:function(vV,vW){if(vV.Const){return null;}else{bh.MarkObsolete(vV.Snap);vV.Current=vW;vV.Snap=bh.CreateWithValue(vW);return;}},SetFinal:function(vX,vY){if(vX.Const){return null;}else{vX.Const=true;vX.Current=vY;vX.Snap=bh.CreateForever(vY);return;}},Update:function(vZ,v0){return V.Set(vZ,v0(V.Get(vZ)));}}),View:$.Class({},{ConvertSeqNode:function(v1,v2){var v3,v4;v3=X.Create(v2);v4=v3.get_View();return{NValue:v1(v4),NVar:v3,NView:v4};},CreateLazy:function(v5){var v6;v6=[{$:0}];return{$:0,$0:function(){var v8,v9,v_;v8=v6[0];if(v8.$==1){if(!bh.IsObsolete(v8.$0)){return v8.$0;}else{v9=v5(null);v6[0]={$:1,$0:v9};return v9;}}else{v_=v5(null);v6[0]={$:1,$0:v_};return v_;}}};},CreateLazy2:function(v$,wa,wb){var wc,wd;wc=wa.$0;wd=wb.$0;return u.CreateLazy(function(){var wf,wg;wf=wc(null);wg=wd(null);return(v$(wf))(wg);});},Map:function(wh,wi){var wj;wj=wi.$0;return u.CreateLazy(function(){return bh.Map(wh,wj(null));});},Map2:function(wl,wm,wn){return u.CreateLazy2(function(wo){return function(wp){return bh.Map2(wl,wo,wp);};},wm,wn);},MapAsync:function(wq,wr){var ws;ws=wr.$0;return u.CreateLazy(function(){return bh.MapAsync(wq,ws(null));});},MapCached:function(wu,wv){var ww,wx;ww=wv.$0;wx=[{$:0}];return u.CreateLazy(function(){return bh.MapCached(wx,wu,ww(null));});},MapSeqCached:function(wz,wA){return u.MapSeqCachedBy(function(wB){return wB;},wz,wA);},MapSeqCachedBy:function(wC,wD,wE){var wF;wF=[bf.New12()];return u.Map(function(wG){var wH,wI,wJ;wH=wF[0];wI=bf.New12();wJ=d.map(function(wK){var wL,wM;wL=wC(wK);wM=wH.ContainsKey(wL)?wH.get_Item(wL):wD(wK);wI.set_Item(wL,wM);return wM;},c.toArray(wG));wF[0]=wI;return wJ;},wE);},MapSeqCachedView:function(wN,wO){return u.MapSeqCachedViewBy(function(wP){return wP;},function(){return function(wR){return wN(wR);};},wO);},MapSeqCachedViewBy:function(wS,wT,wU){var wV;wV=[bf.New12()];return u.Map(function(wW){var wX,wY,wZ;wX=wV[0];wY=bf.New12();wZ=d.map(function(w0){var w1,w2,w3;w1=wS(w0);if(wX.ContainsKey(w1)){w3=wX.get_Item(w1);V.Set(w3.NVar,w0);w2=w3;}else{w2=u.ConvertSeqNode(function(w4){return(wT(w1))(w4);},w0);}wY.set_Item(w1,w2);return w2.NValue;},c.toArray(wW));wV[0]=wY;return wZ;},wU);},SnapshotOn:function(w5,w6,w7){var w8,w9,w_,w$;w8=w6.$0;w9=w7.$0;w_=bh.CreateWithValue(w5);w$=[false];return u.CreateLazy(function(){var xb,xc;xb=w8(null);xc=w9(null);if(w$[0]){return bh.SnapshotOn(xb,xc);}else{bh.When(bh.SnapshotOn(xb,xc),function(){return null;},function(){if(!w$[0]){w$[0]=true;return bh.MarkObsolete(w_);}else{return null;}});return w_;}});},UpdateWhile:function(xf,xg,xh){var xi;xi=[xf];return u.Map2(function(xj){return function(xk){if(xj){xi[0]=xk;}return xi[0];};},xg,xh);},get_Do:function(){return{$:0};}}),View1:$.Class({},{Apply:function(xl,xm){return u.Map2(function(xn){return function(xo){return xn(xo);};},xl,xm);},Bind:function(xp,xq){return E.Join(u.Map(xp,xq));},Const:function(xr){var xs;xs=bh.CreateForever(xr);return{$:0,$0:function(){return xs;}};},Join:function(xu){var xv;xv=xu.$0;return u.CreateLazy(function(){return bh.Bind(function(xx){return xx.$0.call(null,null);},xv(null));});},Sequence:function(xy){return u.CreateLazy(function(){return bh.Sequence(c.map(function(xA){return xA.$0.call(null,null);},xy));});},Sink:function(xB,xC){var xD,xE;xD=xC.$0;xE=function(){return bh.When(xD(null),xB,function(){return bi.Schedule(xE);});};return bi.Schedule(xE);},TryFinally:function(xH,xI){var xJ;xJ=xI.$0;return u.CreateLazy(function(){try{return xJ(null);}finally{xH(null);}});},TryWith:function(xL,xM){var xN;xN=xM.$0;return u.CreateLazy(function(){var xP;try{return xN(null);}catch(xP){return xL(xP).$0.call(null,null);}});}})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Concurrency);b=$.Safe($$.Array);c=$.Safe($$.WebSharper.Seq);d=$.Safe($$.WebSharper.Arrays);e=$.Safe($$.WebSharper.UI);f=$.Safe(e.Next);g=$.Safe(f.Abbrev);h=$.Safe(g.Fresh);i=$.Safe($$.WebSharper.Collections);j=$.Safe(i.HashSetProxy);k=$.Safe(g.HashSet);l=$.Safe(g.JQueue);m=$.Safe($$.WebSharper.Unchecked);n=$.Safe(g.Slot1);o=$.Safe(f.An);p=$.Safe(f.AppendList1);q=$.Safe(f.Anims);r=$.Safe($$.requestAnimationFrame);s=$.Safe(f.Trans);t=$.Safe($$.WebSharper.Option);u=$.Safe(f.View);v=$.Safe($$.WebSharper.Lazy);w=$.Safe(f.Array);x=$.Safe(f.Attrs);y=$.Safe(f.DomUtility);z=$.Safe(f.AttrModule);A=$.Safe(f.AttrProxy);B=$.Safe($$.WebSharper.List);C=$.Safe(f.AnimatedAttrNode);D=$.Safe(f.DynamicAttrNode);E=$.Safe(f.View1);F=$.Safe($$.document);G=$.Safe(f.Doc);H=$.Safe(f.Elt);I=$.Safe($$.Seq);J=$.Safe(f.Docs);K=$.Safe(f.String);L=$.Safe(f.CheckedInput);M=$.Safe(g.Mailbox);N=$.Safe($$.WebSharper.Operators);O=$.Safe(B.T);P=$.Safe($$.jQuery);Q=$.Safe(J.NodeSet);R=$.Safe(f.DocElemNode);S=$.Safe(J.DomNodes);T=$.Safe(f.Easing);U=$.Safe(f.Easings);V=$.Safe(f.Var1);W=$.Safe($$.RegExp);X=$.Safe(f.Var);Y=$.Safe(f.FlowBuilder);Z=$.Safe(f.Flow);_0=$.Safe(f.Input);_1=$.Safe(f.DoubleInterpolation);_2=$.Safe(f.Key);_3=$.Safe(f.ListModels);_4=$.Safe(f.RefImpl1);_5=$.Safe(f.ListModel);_6=$.Safe(f.Storage1);_7=$.Safe(f.Model);_8=$.Safe($$.WebSharper.Strings);_9=$.Safe($$.encodeURIComponent);_=$.Safe($$.decodeURIComponent);ba=$.Safe(f.Route);bb=$.Safe(f.Routing);bc=$.Safe(f.Router1);bd=$.Safe(f.Router);be=$.Safe(f.Trie1);bf=$.Safe(i.Dictionary);bg=$.Safe($$.window);bh=$.Safe(f.Snap1);bi=$.Safe(g.Async);bj=$.Safe($$.WebSharper.Ref);bk=$.Safe(_6.ArrayStorage);bl=$.Safe(_6.LocalStorageBackend);bm=$.Safe($$.JSON);bn=$.Safe($$.WebSharper.Char);bo=$.Safe(f.Submitter);bp=$.Safe($$.WebSharper.Enumerator);bq=$.Safe(i.ResizeArray);br=$.Safe(bq.ResizeArrayProxy);bs=$.Safe(i.MapModule);bt=$.Safe(i.FSharpMap);return bu=$.Safe(f.RefImpl);});$.OnLoad(function(){$.Inherit(H,G);_0.MousePosSt1();_0.MouseBtnSt1();_0.KeyListenerState();_0.ActivateKeyListener();_0.ActivateButtonListener();U.CubicInOut();y.Doc();x.EmptyAttr();z.ValidateForm();h.counter();return;});}());
